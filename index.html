<!DOCTYPE html>
<html lang="hr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="GAMIFY - Pretvori svoj ≈æivot u igricu. Produktivnost kroz gamifikaciju i Atomic Habits principe.">
    <title>GAMIFY - Life Quest System üéÆ</title>

    <!-- PWA Support -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#7c3aed">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icons/icon-192.png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üéÆ</span>
                    <span>GAMIFY</span>
                </div>

                <div class="player-stats">
                    <div class="level-badge">
                        <span class="level-icon" id="level-icon">üå±</span>
                        <div class="level-info">
                            <span class="level-number" id="level-number">Level 1</span>
                            <span class="level-title" id="level-title">Novice</span>
                        </div>
                    </div>

                    <!-- HP Bar -->
                    <div class="xp-container hp-container">
                        <div class="xp-label">
                            <span>HP</span>
                            <span><span id="hp-current">100</span> / <span id="hp-max">100</span></span>
                        </div>
                        <div class="xp-bar hp-bar-bg">
                            <div class="xp-fill hp-fill" id="hp-fill" style="width: 100%"></div>
                        </div>
                    </div>

                    <div class="xp-container">
                        <div class="xp-label">
                            <span>XP</span>
                            <span><span id="xp-current">0</span> / <span id="xp-next">100</span></span>
                        </div>
                        <div class="xp-bar">
                            <div class="xp-fill" id="xp-fill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <div class="dashboard">
            <!-- Main Content Area -->
            <div class="main-content">
                <!-- Stats Row -->
                <div class="stats-row">
                    <div class="stat-card streak">
                        <div class="stat-icon streak-fire">üî•</div>
                        <div class="stat-value" id="streak-value">0</div>
                        <div class="stat-label">Day Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-value"><span id="today-completed">0</span>/<span id="today-total">0</span>
                        </div>
                        <div class="stat-label">Today</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚ö°</div>
                        <div class="stat-value" id="multiplier-value">1x</div>
                        <div class="stat-label">Multiplier</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-value" id="total-xp-value">0</div>
                        <div class="stat-label">Total XP</div>
                    </div>
                </div>

                <!-- Quests Section -->
                <section class="quests-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <span>‚öîÔ∏è</span>
                            <span>Daily Quests</span>
                        </h2>
                    </div>
                    <div class="quest-list" id="quest-list">
                        <!-- Quests will be rendered here by JavaScript -->
                    </div>

                    <!-- Add New Quest Button -->
                    <button class="add-task-btn" onclick="app.openAddQuestModal()">
                        <span>‚ûï</span> Dodaj Novi Quest
                    </button>
                </section>

                <!-- Anti-Quests Section (Bad Habits) -->
                <section class="quests-section anti-quests">
                    <div class="section-header">
                        <h2 class="section-title">
                            <span>üö´</span>
                            <span>Bad Habits (Anti-Quests)</span>
                        </h2>
                    </div>
                    <div class="quest-list" id="bad-habits-list">
                        <!-- Bad Habits will be rendered here -->
                    </div>
                </section>
            </div>

            <!-- Sidebar -->
            <aside class="sidebar">
                <!-- Identity Card (Atomic Habits) -->
                <div class="identity-card">
                    <div class="identity-title">ü™û Tko Postaje≈°</div>
                    <p class="identity-statement" id="identity-statement">
                        Zavr≈°i task i postani osoba koju ≈æeli≈° biti!
                    </p>
                </div>

                <!-- Motivational Quote -->
                <div class="quote-card">
                    <p class="quote-text" id="quote-text">
                        "Svaki put kad zavr≈°i≈° task, glasa≈° za osobu koju ≈æeli≈° postati."
                    </p>
                    <p class="quote-source">‚Äî Atomic Habits</p>
                </div>

                <!-- Daily Plan Button -->
                <div class="progress-card"
                    style="cursor: pointer; background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.1)); border-color: rgba(59, 130, 246, 0.3);"
                    onclick="app.generateDailySchedule()">
                    <div class="progress-title" style="color: #60a5fa; margin-bottom: 0.5rem;">üìÖ Planiraj Dan</div>
                    <p style="font-size: 0.8rem; color: var(--text-secondary);">Automatski kreiraj raspored za danas
                        pomoƒáu AI</p>
                </div>

                <!-- Compound Progress (1% daily) -->
                <div class="progress-card">
                    <div class="progress-title">üìà 1% Dnevno Pobolj≈°anje</div>
                    <div class="compound-progress">
                        <div class="compound-value" id="compound-value">1.00x</div>
                        <div class="compound-label" id="compound-days">0 dana konzistentnosti</div>
                    </div>
                </div>

                <!-- Achievements -->
                <div class="achievements-panel">
                    <div class="achievements-title">
                        <span>üèÜ</span>
                        <span>Achievements</span>
                    </div>
                    <div class="achievements-grid" id="achievements-grid">
                        <!-- Achievements will be rendered here by JavaScript -->
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Level Up Modal -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <div class="modal-icon" id="modal-icon">üéâ</div>
            <h2 class="modal-title" id="modal-title">LEVEL UP!</h2>
            <p class="modal-text" id="modal-text">ƒåestitamo! Dosegao si novi level!</p>
            <button class="modal-btn" onclick="closeModal()">Nastavi Quest</button>
        </div>
    </div>

    <!-- Add Quest Modal -->
    <div class="modal-overlay" id="add-quest-modal">
        <div class="modal add-quest-modal">
            <button class="modal-close" onclick="app.closeAddQuestModal()">‚úï</button>
            <div class="modal-icon">üÜï</div>
            <h2 class="modal-title">Novi Quest</h2>

            <form id="add-quest-form" onsubmit="app.createQuest(event)">
                <div class="form-group">
                    <label for="quest-name">Naziv Questa *</label>
                    <input type="text" id="quest-name" placeholder="npr. Faks, Teretana, ƒåitanje..." required>
                </div>

                <div class="form-group">
                    <label for="quest-description">Opis (opcionalno)</label>
                    <input type="text" id="quest-description" placeholder="Kratak opis cilja...">
                </div>

                <div class="form-group">
                    <label>Subtaskovi (zadaci unutar questa)</label>
                    <div id="subtask-inputs">
                        <div class="subtask-input-row">
                            <input type="text" class="subtask-input" placeholder="npr. Predavanje iz Matematike">
                            <button type="button" class="btn-icon remove-subtask"
                                onclick="app.removeSubtaskInput(this)">‚úï</button>
                        </div>
                    </div>
                    <button type="button" class="btn-add-subtask" onclick="app.addSubtaskInput()">
                        <span>‚ûï</span> Dodaj subtask
                    </button>
                </div>

                <!-- Auto-generated preview -->
                <div class="auto-generated-preview" id="auto-preview">
                    <div class="preview-title">‚ú® Automatski generirano:</div>
                    <div class="preview-content" id="preview-content">
                        Unesi naziv questa da vidi≈° preview...
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-ghost" onclick="app.closeAddQuestModal()">Odustani</button>
                    <button type="submit" class="btn btn-primary">Kreiraj Quest</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Schedule Modal -->
    <div class="modal" id="schedule-modal">
        <div class="modal-content" style="max-width: 600px;">
            <button class="modal-close" onclick="app.closeScheduleModal()">‚úï</button>
            <div class="modal-icon">üìÖ</div>
            <h2 class="modal-title">Tvoj Pametni Raspored</h2>

            <div id="schedule-timeline" class="timeline-container">
                <!-- Timeline items will be generated here -->
            </div>

            <div class="form-actions" style="margin-top: 2rem;">
                <button type="button" class="btn btn-secondary" onclick="app.closeScheduleModal()">Zatvori</button>
                <button type="button" class="btn btn-primary" onclick="window.print()">üñ®Ô∏è Isprintaj / PDF</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="data.js"></script>
    <script src="app.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('GAMIFY: Service Worker registered'))
                    .catch(err => console.log('GAMIFY: Service Worker registration failed', err));
            });
        }
    </script>
</body>

</html>